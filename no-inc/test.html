<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
	"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html>
<head>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" charset="utf-8">
jQuery(function() {
	
	$('.wwt-add-button').click(function(e) {
		
		var raVal = $('#ra').val();
			$('#ra').val('');
		var decVal = $('#dec').val();
			$('#dec').val('');
		var id = $('#galaxy-id').val();
			$('#galaxy-id').val('');

		$('<div class="hilite" id="row'+id+'" />')
			.appendTo('#add-galaxy-div');

		$('<input type="text" class="wwt-ra" id="ra'+id+'" name="ra'+id+'" value="'+raVal+'" /><input type="text" class="wwt-dec" id="dec'+id+'" name="dec'+id+'" value="'+decVal+'" /><a id="wwt-del-button-id" class="wwt-del-button"><span class="wwt-del">Delete</span></a>')
			.appendTo('#row'+id);

		id = (id - 1) + 2;
		$('#galaxy-id').val(id);

		return false;
	});
	
	$(".wwt-save-button").click(function(e) {
			
			var raVals = new Array();
			var decVals = new Array();

			$("input[id^='ra']").each(function() {
				raVals.push( $(this).val() );
			});
			$("input[id^='dec']").each(function() {
				decVals.push( $(this).val() );
			});
			
			var url = "test.php"+"?wwtra="+raVals.join(',')+"&wwtdec="+decVals.join(',');
			
			// jQuery ajax failed me, while this did the job
			if (window.XMLHttpRequest) {
				xmlhttp = new XMLHttpRequest();
				xmlhttp.open("POST",url,false);
				xmlhttp.send(null);
			}

	  document.forms[0].submit();
		return false;
	});
});	
</script>
</head>
<body>

	<form action="" method="post" id="tour-form" enctype="multipart/formdata">
		<p>Enter each galaxy's Right Ascension and Declination values in decimal format. You can add more than one galaxy by clicking the Add Galaxy button.</p>	
	
		<p><strong>Add Galaxy:</strong></p>

		<div class="wwtag">

			<label for="ra" class="lb-left">Right Ascension</label>
			<label for="dec" class="lb-right">Declination</label>

			<input type="hidden" id="is_tour" name="is_tour" value="" />
			<input type="hidden" id="galaxy-id" value="1">
			<div id="add-galaxy-div">
			</div>
	
			<div class="wwtag-radec">
				<input type="text" id="ra" name="ra" value="" />
				<input type="text" id="dec" name="dec" value="" />
		
				<select name="messier" id="messier">
					<option value="0"> Optionally select from a list of preset objects </option>
				</select>
	
				<a href="#" class="wwt-add-button">
					<span class="wwt-add">Add Object</span>
				</a>
			</div>
	
		</div>
		
		
		
		<div class="wwtst">

			<input type="hidden" id="wwt-generate-tour" />

			<a href="#" rel="modal" class="wwt-save-button">
				<span class="wwt-save">Save</span>
			</a>

		</div>
		
		
	</form>

</body>
</html>